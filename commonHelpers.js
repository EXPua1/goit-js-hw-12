import{a as C,S as q,i as d}from"./assets/vendor-b11e2a50.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const S="44853221-20be0a035158c611166c29677",$="https://pixabay.com/api/";async function v(e,s=1,o=15){const n=encodeURIComponent(e),t=`${$}?key=${S}&q=${n}&image_type=photo&orientation=horizontal&safesearch=true&page=${s}&per_page=${o}`;return C.get(t)}let A=new q(".gallery a",{captionsData:"alt",captionDelay:250,close:!0,nav:!0});function L(e){const s=document.querySelector(".gallery");e.forEach(o=>{const n=document.createElement("div");n.classList.add("card");const t=document.createElement("a");t.href=o.largeImageURL,t.title=o.tags;const r=document.createElement("img");r.src=o.webformatURL,r.alt=o.tags,t.appendChild(r);const a=document.createElement("div");a.classList.add("card-info"),a.innerHTML=`
      <p>Likes ${o.likes}</p>
      <p>Views ${o.views}</p>
      <p>Comments ${o.comments}</p>
      <p>Downloads ${o.downloads}</p>
    `,n.appendChild(t),n.appendChild(a),s.appendChild(n)}),A.refresh()}const E=document.querySelector(".gallery");function g(e="Sorry, there are no images matching your search query. Please try again!"){d.error({title:"Error",message:e,position:"topRight"})}function M(){d.info({title:"Внимание",message:"Введите текст для поиска изображений",position:"topRight"})}function I(){E.insertAdjacentHTML("afterbegin",'<div class="loader">Loading...</div>')}function b(){const e=E.querySelector(".loader");e&&e.parentNode.removeChild(e)}function B(){d.info({title:"Attention",message:"We're sorry, but you've reached the end of search results.",position:"topRight"})}function R(){const e=document.querySelectorAll(".gallery .card");if(e.length>0){const o=e[e.length-1].getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}}function y(e="An unexpected error occurred."){d.error({title:"Error",message:e,position:"topRight"})}const T=document.getElementById("searchForm"),f=document.querySelector(".search input"),P=document.querySelector(".gallery"),x=document.getElementById("button-container");let p="",c=!1,i=1;const l=15;let h=0,u=!0;T.addEventListener("submit",e=>{if(e.preventDefault(),!c){if(f.value.trim()===""){M();return}c=!0,i=1,p=f.value.trim(),P.innerHTML="",u=!0,F()}});async function F(){try{I();const e=await v(p,i,l);if(h=e.data.totalHits,e.data.hits.length===0){m(),g(),f.value="";return}else L(e.data.hits),w(e.data.hits.length),h<=i*l&&(m(),setTimeout(()=>{B()},500))}catch(e){console.error("Error during the search request:",e),g("An error occurred during the search.")}finally{b(),c=!1}}function w(e){e<l&&(u=!1),u&&H()}function H(){if(!document.getElementById("fetchButton")){const e=document.createElement("button");e.id="fetchButton",e.textContent="Load More Images",e.addEventListener("click",N),x.appendChild(e)}}function m(){const e=document.getElementById("fetchButton");e&&e.remove()}async function N(){if(!c){c=!0,i+=1;try{I();const e=await v(p,i,l);e.data.hits.length===0?(y("No more images found."),u=!1):(L(e.data.hits),w(e.data.hits.length),h<=i*l&&(m(),setTimeout(()=>{B()},500)),R())}catch(e){console.error("Error during the search request:",e),y("An error occurred during the search.")}finally{b(),c=!1}}}document.addEventListener("touchstart",function(){},{passive:!0});document.addEventListener("touchmove",function(){},{passive:!0});
//# sourceMappingURL=commonHelpers.js.map
