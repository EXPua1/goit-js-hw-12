import{a as C,S as I,i as d}from"./assets/vendor-b11e2a50.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const q="44853221-20be0a035158c611166c29677",w="https://pixabay.com/api/";async function m(e,a=1,o=15){const n=encodeURIComponent(e),t=`${w}?key=${q}&q=${n}&image_type=photo&orientation=horizontal&safesearch=true&page=${a}&per_page=${o}`;return C.get(t)}let S=new I(".gallery a",{captionsData:"alt",captionDelay:250,close:!0,nav:!0});function p(e){const a=document.querySelector(".gallery");e.forEach(o=>{const n=document.createElement("div");n.classList.add("card");const t=document.createElement("a");t.href=o.largeImageURL,t.title=o.tags;const r=document.createElement("img");r.src=o.webformatURL,r.alt=o.tags,t.appendChild(r);const s=document.createElement("div");s.classList.add("card-info"),s.innerHTML=`
      <p>Likes ${o.likes}</p>
      <p>Views ${o.views}</p>
      <p>Comments ${o.comments}</p>
      <p>Downloads ${o.downloads}</p>
    `,n.appendChild(t),n.appendChild(s),a.appendChild(n)}),S.refresh()}const g=document.querySelector(".gallery");function B(){d.alert({title:"Error",message:"No images found. Please try again.",position:"topRight"})}function $(){d.info({title:"Внимание",message:"Введите текст для поиска изображений",position:"topRight"})}function y(){g.insertAdjacentHTML("afterbegin",'<div class="loader">Loading...</div>')}function L(){const e=g.querySelector(".loader");e&&e.parentNode.removeChild(e)}function P(){const e=document.querySelectorAll(".gallery .card");if(e.length>0){const o=e[e.length-1].getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}}document.querySelector(".search button");const u=document.querySelector(".search input"),v=document.querySelector(".gallery"),R=document.getElementById("searchForm"),E=document.getElementById("button-container");let f="",i=!1,c=1;const l=15;R.addEventListener("submit",e=>{if(e.preventDefault(),!i){if(u.value.trim()===""){$();return}i=!0,c=1,f=u.value.trim(),v.innerHTML="",M()}});async function M(){try{y();const e=await m(f,c,l);e.data.hits.length===0?(B(),v.innerHTML=""):(p(e.data.hits),u.value="",e.data.hits.length===l&&b(),e.data.totalHits<=c*l&&(h(),setTimeout(()=>{endCollection()},500)))}catch(e){console.error("Error during the search request:",e),d.error({title:"Error",message:"An error occurred during the search. Please try again later.",position:"topRight"})}finally{L(),i=!1}}function b(){h();const e=document.createElement("button");e.id="fetchButton",e.textContent="Load More Images",e.addEventListener("click",T),E.appendChild(e)}function h(){const e=E.querySelector("#fetchButton");e&&e.remove()}async function T(){if(!i){i=!0,c+=1;try{y();const e=await m(f,c,l);e.data.hits.length===0?d.alert({title:"Error",message:"No more images found.",position:"topRight"}):(p(e.data.hits),e.data.hits.length===l&&b(),e.data.totalHits<=c*l&&(h(),setTimeout(()=>{endCollection()},500)),P())}catch(e){console.error("Error during the search request:",e),d.error({title:"Error",message:"An error occurred during the search. Please try again later.",position:"topRight"})}finally{L(),i=!1}}}
//# sourceMappingURL=commonHelpers.js.map
