import{a as v,S as L,i}from"./assets/vendor-b11e2a50.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();const b="44853221-20be0a035158c611166c29677",$="https://pixabay.com/api/";async function p(e){const n=encodeURIComponent(e),a=`${$}?key=${b}&q=${n}&image_type=photo&orientation=horizontal&safesearch=true`;return v.get(a)}let S=new L(".gallery a",{captionsData:"alt",captionDelay:250,close:!0,nav:!0});function h(e){const n=document.querySelector(".gallery");n.innerHTML="";const a=e.map(r=>`
    <div class="card">
      <a href="${r.largeImageURL}" title="${r.tags}">
        <img src="${r.webformatURL}" alt="${r.tags}">
      </a>
      <div class="card-info">
        <p>Likes ${r.likes}</p>
        <p>Views ${r.views}</p>
        <p>Comments ${r.comments}</p>
        <p>Downloads ${r.downloads}</p>
      </div>
    </div>
  `).join("");n.insertAdjacentHTML("beforeend",a),S.refresh()}const w=document.querySelector(".search button"),l=document.querySelector(".search input"),c=document.querySelector(".gallery");let s=!1,u=1;const f=15;w.addEventListener("click",()=>{if(!s){if(l.value===""){i.info({title:"Внимание",message:"Введите текст для поиска изображений",position:"topRight"});return}s=!0,u=1,c.innerHTML="",P()}});async function P(){try{m();const e=await p(l.value,u,f);e.data.hits.length===0?i.alert({title:"Error",message:"No images found. Please try again.",position:"topRight"}):(h(e.data.hits),l.value="",g())}catch(e){console.error("Ошибка при выполнении поискового запроса:",e),i.error({title:"Error",message:"An error occurred during the search. Please try again later.",position:"topRight"})}finally{y(),s=!1}}function g(){q();const e=document.createElement("button");e.textContent="Fetch more posts",e.addEventListener("click",E),c.appendChild(e)}function q(){const e=c.querySelector("button");e&&e.remove()}async function E(){if(!s){s=!0,u+=1;try{m();const e=await p(l.value,u,f);e.data.hits.length===0?i.alert({title:"Error",message:"No more images found.",position:"topRight"}):(h(e.data.hits),e.data.hits.length===f&&g())}catch(e){console.error("Ошибка при выполнении поискового запроса:",e),i.error({title:"Error",message:"An error occurred during the search. Please try again later.",position:"topRight"})}finally{y(),s=!1}}}function m(){c.insertAdjacentHTML("afterbegin",'<div class="loader">Loading...</div>')}function y(){const e=c.querySelector(".loader");e&&e.parentNode.removeChild(e)}
//# sourceMappingURL=commonHelpers.js.map
