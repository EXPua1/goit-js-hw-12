import{a as w,S as C,i as d}from"./assets/vendor-b11e2a50.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const q="44853221-20be0a035158c611166c29677",S="https://pixabay.com/api/";async function y(e,s=1,o=15){const n=encodeURIComponent(e),t=`${S}?key=${q}&q=${n}&image_type=photo&orientation=horizontal&safesearch=true&page=${s}&per_page=${o}`;return w.get(t)}let $=new C(".gallery a",{captionsData:"alt",captionDelay:250,close:!0,nav:!0});function v(e){const s=document.querySelector(".gallery");e.forEach(o=>{const n=document.createElement("div");n.classList.add("card");const t=document.createElement("a");t.href=o.largeImageURL,t.title=o.tags;const r=document.createElement("img");r.src=o.webformatURL,r.alt=o.tags,t.appendChild(r);const a=document.createElement("div");a.classList.add("card-info"),a.innerHTML=`
      <p>Likes ${o.likes}</p>
      <p>Views ${o.views}</p>
      <p>Comments ${o.comments}</p>
      <p>Downloads ${o.downloads}</p>
    `,n.appendChild(t),n.appendChild(a),s.appendChild(n)}),$.refresh()}const L=document.querySelector(".gallery");function P(){d.alert({title:"Error",message:"No images found. Please try again.",position:"topRight"})}function A(){d.info({title:"Внимание",message:"Введите текст для поиска изображений",position:"topRight"})}function E(){L.insertAdjacentHTML("afterbegin",'<div class="loader">Loading...</div>')}function I(){const e=L.querySelector(".loader");e&&e.parentNode.removeChild(e)}function b(){d.info({title:"Attention",message:"We're sorry, but you've reached the end of search results.",position:"topRight"})}function M(){const e=document.querySelectorAll(".gallery .card");if(e.length>0){const o=e[e.length-1].getBoundingClientRect().height;window.scrollBy({top:o*2,behavior:"smooth"})}}const R=document.getElementById("searchForm"),g=document.querySelector(".search input"),T=document.querySelector(".gallery"),N=document.getElementById("button-container");let p="",i=!1,c=1;const l=15;let f=0,u=!0;R.addEventListener("submit",e=>{if(e.preventDefault(),!i){if(g.value.trim()===""){A();return}i=!0,c=1,p=g.value.trim(),T.innerHTML="",u=!0,x()}});async function x(){try{E();const e=await y(p,c,l);if(f=e.data.totalHits,e.data.hits.length===0){P(),h();return}else v(e.data.hits),B(e.data.hits.length),f<=c*l&&(h(),setTimeout(()=>{b()},500))}catch(e){console.error("Error during the search request:",e),m("An error occurred during the search. Please try again later.")}finally{I(),i=!1}}function B(e){e<l&&(u=!1),u&&F()}function F(){if(!document.getElementById("fetchButton")){const e=document.createElement("button");e.id="fetchButton",e.textContent="Load More Images",e.addEventListener("click",H),N.appendChild(e)}}function h(){const e=document.getElementById("fetchButton");e&&e.remove()}async function H(){if(!i){i=!0,c+=1;try{E();const e=await y(p,c,l);e.data.hits.length===0?(m("No more images found."),u=!1):(v(e.data.hits),B(e.data.hits.length),f<=c*l&&(h(),setTimeout(()=>{b()},500)),M())}catch(e){console.error("Error during the search request:",e),m("An error occurred during the search. Please try again later.")}finally{I(),i=!1}}}function m(e="An unexpected error occurred."){d.error({title:"Error",message:e,position:"topRight"})}document.addEventListener("touchstart",function(){},{passive:!0});document.addEventListener("touchmove",function(){},{passive:!0});
//# sourceMappingURL=commonHelpers.js.map
